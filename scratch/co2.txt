
#include <Arduino.h>
#include <MHZ19C_Active.h>
#include <SoftwareSerial.h>

SoftwareSerial CO2_SERIAL(2, 3);  // RX on 2, TX on 3
MHZ19C_Active mhz(CO2_SERIAL);

unsigned long displayTimer = 0;

void setup() {
  Serial.begin(9600);
  CO2_SERIAL.begin(9600);
  Serial.println("C8 Sensor Diagnostic: Listening for 42 4D stream...");
}

void loop() {
  MHZ19C_Data co2_results = mhz.read();
  if (co2_results.success) {
    // We only print every 2 seconds to keep the terminal readable
    if (millis() - displayTimer >= 2000) {
      Serial.print("CO2: ");
      Serial.print(co2_results.co2);
      Serial.println(" ppm");

      displayTimer = millis();
    }
  }
}